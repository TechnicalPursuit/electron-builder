{"version":3,"file":"portableTest.js","sourceRoot":"","sources":["../../src/windows/portableTest.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,uDAAiD;AACjD,2CAA4B;AAC5B,sDAAyE;AAEzE,+GAA+G;AAC/G,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,UAAU,EAAE,gBAAG,CAAC;IACpC,OAAO,EAAE,2BAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;IAC5D,MAAM,EAAE;QACN,OAAO,EAAE,IAAI;QACb,IAAI,EAAE;YACJ,mBAAmB,EAAE,KAAK;SAC3B;KACF;CACF,CAAC,CAAC,CAAA;AAEH,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,cAAc,EAAE,gBAAG,CAAC;IAC1C,OAAO,EAAE,2BAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,CAAC;IAClD,MAAM,EAAE;QACN,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE;YACR,MAAM,EAAE,IAAI;YACZ,aAAa,EAAE,6BAA6B;SAC7C;QACD,WAAW,EAAE,QAAQ;KACtB;CACF,CAAC,CAAC,CAAA;AAEH,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,4BAA4B,EAAE,gBAAG,CAAC;IACnD,OAAO,EAAE,2BAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,EAAE,uBAAI,CAAC,IAAI,EAAE,uBAAI,CAAC,GAAG,CAAC;IACvE,MAAM,EAAE;QACN,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE;YACR,MAAM,EAAE,IAAI;SACb;QACD,WAAW,EAAE,OAAO;KACrB;CACF,CAAC,CAAC,CAAA;AAEH,IAAI,CAAC,UAAU,CAAC,qDAAqD,EAAE,gBAAG,CAAC;IACzE,OAAO,EAAE,2BAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,CAAC;IACpD,MAAM,EAAE;QACN,IAAI,EAAE;YACJ,sDAAsD;YACtD,YAAY,EAAE,2CAA2C;YACzD,aAAa,EAAE,oBAAoB;SACpC;QACD,QAAQ,EAAE;YACR,qBAAqB,EAAE,OAAO;YAC9B,sDAAsD;YACtD,YAAY,EAAE,0CAA0C;SACzD;KACF;CACF,EAAE;IACD,iBAAiB,EAAE,UAAU,CAAC,EAAE;QAC9B,OAAO,0BAAa,CAAC,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO,EAAE,oBAAoB,CAAC,CAAC,CAAA;IAC9F,CAAC;CACF,CAAC,CAAC,CAAA;AAEH,IAAI,CAAC,YAAY,CAAC,wBAAwB,EAAE,gBAAG,CAAC;IAC9C,OAAO,EAAE,2BAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,CAAC;IACpD,MAAM,EAAE;QACN,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE;YACR,sDAAsD;YACtD,YAAY,EAAE,0CAA0C;YACxD,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,0BAAa,EAAE,EAAE,qBAAqB,CAAC;SAClE;KACF;CACF,CAAC,CAAC,CAAA","sourcesContent":["import { Platform, Arch } from \"electron-builder\"\nimport * as path from \"path\"\nimport { app, copyTestAsset, getFixtureDir } from \"../helpers/packTester\"\n\n// build in parallel - https://github.com/electron-userland/electron-builder/issues/1340#issuecomment-286061789\ntest.ifAll.ifNotCiMac(\"portable\", app({\n  targets: Platform.WINDOWS.createTarget([\"portable\", \"nsis\"]),\n  config: {\n    publish: null,\n    nsis: {\n      differentialPackage: false,\n    },\n  }\n}))\n\ntest.ifAll.ifDevOrWinCi(\"portable zip\", app({\n  targets: Platform.WINDOWS.createTarget(\"portable\"),\n  config: {\n    publish: null,\n    portable: {\n      useZip: true,\n      unpackDirName: \"0ujssxh0cECutqzMgbtXSGnjorm\",\n    },\n    compression: \"normal\",\n  }\n}))\n\ntest.ifAll.ifNotCi(\"portable zip several archs\", app({\n  targets: Platform.WINDOWS.createTarget(\"portable\", Arch.ia32, Arch.x64),\n  config: {\n    publish: null,\n    portable: {\n      useZip: true,\n    },\n    compression: \"store\",\n  }\n}))\n\ntest.ifNotCiMac(\"portable - artifactName and request execution level\", app({\n  targets: Platform.WINDOWS.createTarget([\"portable\"]),\n  config: {\n    nsis: {\n      //tslint:disable-next-line:no-invalid-template-strings\n      artifactName: \"${productName}Installer.${version}.${ext}\",\n      installerIcon: \"foo test space.ico\",\n    },\n    portable: {\n      requestExecutionLevel: \"admin\",\n      //tslint:disable-next-line:no-invalid-template-strings\n      artifactName: \"${productName}Portable.${version}.${ext}\",\n    },\n  },\n}, {\n  projectDirCreated: projectDir => {\n    return copyTestAsset(\"headerIcon.ico\", path.join(projectDir, \"build\", \"foo test space.ico\"))\n  },\n}))\n\ntest.ifDevOrWinCi(\"portable - splashImage\", app({\n  targets: Platform.WINDOWS.createTarget([\"portable\"]),\n  config: {\n    publish: null,\n    portable: {\n      //tslint:disable-next-line:no-invalid-template-strings\n      artifactName: \"${productName}Portable.${version}.${ext}\",\n      splashImage: path.resolve(getFixtureDir(), \"installerHeader.bmp\"),\n    },\n  },\n}))\n"]}