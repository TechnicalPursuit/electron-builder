{"version":3,"file":"appxTest.js","sourceRoot":"","sources":["../../src/windows/appxTest.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,uDAAiD;AACjD,sDAA0D;AAC1D,2CAA4B;AAC5B,gEAA0C;AAC1C,uCAAoC;AACpC,+CAAwC;AAExC,+CAA+C;AAC/C,MAAM,gBAAgB,GAAG,8nGAA8nG,CAAA;AAEvpG,MAAM,EAAE,GAAG,OAAO,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAA;AAEzE,EAAE,CAAC,YAAY,CAAC,MAAM,EAAE,gBAAG,CAAC;IAC1B,OAAO,EAAE,2BAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,EAAE,uBAAI,CAAC,GAAG,CAAC;CAC3D,EAAE;IACD,iBAAiB,EAAE,KAAK,EAAC,UAAU,EAAC,EAAE;QACpC,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO,EAAE,MAAM,CAAC,CAAA;QACxD,MAAM,oBAAS,CAAC,SAAS,CAAC,CAAA;QAC1B,MAAM,sBAAe,CAAC,GAAG,CAAC,CAAC,yBAAyB,EAAE,yBAAyB,EAAE,yBAAyB,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,0BAAa,CAAC,eAAe,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC,CAAA;IACxL,CAAC;IACD,SAAS,EAAE,IAAI;CAChB,CAAC,CAAC,CAAA;AAEH,EAAE,CAAC,YAAY,CAAC,aAAa,EAAE,gBAAG,CAAC;IACjC,OAAO,EAAE,2BAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,EAAE,uBAAI,CAAC,GAAG,CAAC;IAC1D,MAAM,EAAE;QACN,IAAI,EAAE;YACJ,sBAAsB,EAAE,IAAI;SAC7B;KACF;CACF,EAAE,EACF,CAAC,CAAC,CAAA;AAEH,MAAM,GAAG,GAAG,wBAAS,CAAC,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAA;AACnF,GAAG,CAAC,OAAO,CAAC,wBAAwB,EAAE,gBAAG,CAAC;IACxC,OAAO,EAAE,2BAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,EAAE,uBAAI,CAAC,GAAG,CAAC;IAC1D,MAAM,EAAE;QACN,GAAG,EAAE;YACH,sBAAsB,EAAE,KAAK;SAC9B;KACF;CACF,CAAC,CAAC,CAAA;AAEH,wBAAwB;AACxB,EAAE,CAAC,+CAA+C,EAAE,gBAAG,CAAC;IACtD,OAAO,EAAE,2BAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,EAAE,uBAAI,CAAC,IAAI,EAAE,uBAAI,CAAC,GAAG,CAAC;IACrE,MAAM,EAAE;QACN,OAAO,EAAE,gBAAgB;QACzB,cAAc,EAAE,MAAM;QACtB,IAAI,EAAE;YACJ,SAAS,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC;SAC9B;KACF;CACF,CAAC,CAAC,CAAA","sourcesContent":["import { Arch, Platform } from \"electron-builder\"\nimport { app, copyTestAsset } from \"../helpers/packTester\"\nimport * as path from \"path\"\nimport BluebirdPromise from \"bluebird-lst\"\nimport { ensureDir } from \"fs-extra\"\nimport { isEnvTrue } from \"builder-util\"\n\n// test that we can get info from protected pfx\nconst protectedCscLink = \"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\"\n\nconst it = process.platform === \"darwin\" ? test.ifAll.ifDevOrWinCi : test\n\nit.ifDevOrWinCi(\"AppX\", app({\n  targets: Platform.WINDOWS.createTarget([\"appx\"], Arch.x64),\n}, {\n  projectDirCreated: async projectDir => {\n    const targetDir = path.join(projectDir, \"build\", \"appx\")\n    await ensureDir(targetDir)\n    await BluebirdPromise.map([\"BadgeLogo.scale-100.png\", \"BadgeLogo.scale-140.png\", \"BadgeLogo.scale-180.png\"], name => copyTestAsset(`appx-assets/${name}`, path.join(targetDir, name)))\n  },\n  signedWin: true,\n}))\n\nit.ifDevOrWinCi(\"auto launch\", app({\n  targets: Platform.WINDOWS.createTarget([\"appx\"], Arch.x64),\n  config: {\n    appx: {\n      addAutoLaunchExtension: true,\n    },\n  },\n}, {\n}))\n\nconst it2 = isEnvTrue(process.env.DO_APPX_CERT_STORE_AWARE_TEST) ? test : test.skip\nit2.ifNotCi(\"certificateSubjectName\", app({\n  targets: Platform.WINDOWS.createTarget([\"appx\"], Arch.x64),\n  config: {\n    win: {\n      certificateSubjectName: \"Foo\",\n    }\n  },\n}))\n\n// todo - check manifest\nit(\"languages and not signed (windows store only)\", app({\n  targets: Platform.WINDOWS.createTarget([\"appx\"], Arch.ia32, Arch.x64),\n  config: {\n    cscLink: protectedCscLink,\n    cscKeyPassword: \"test\",\n    appx: {\n      languages: [\"de-DE\", \"ru-RU\"]\n    }\n  }\n}))"]}